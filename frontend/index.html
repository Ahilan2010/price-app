<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storenvy Price Tracker</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1><i class="fas fa-shopping-bag"></i> Storenvy Price Tracker</h1>
            <div class="stats" id="stats">
                <div class="stat-item">
                    <span class="stat-value" id="totalProducts">0</span>
                    <span class="stat-label">Products</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="belowTarget">0</span>
                    <span class="stat-label">Below Target</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="totalSavings">$0</span>
                    <span class="stat-label">Total Savings</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Products Page -->
        <div class="page active" id="productsPage">
            <div class="container">
                <div class="page-header">
                    <h2>Tracked Products</h2>
                    <button class="btn btn-primary" onclick="showAddProductModal()">
                        <i class="fas fa-plus"></i> Add Product
                    </button>
                </div>
                
                <div class="products-grid" id="productsList">
                    <!-- Products will be loaded here -->
                </div>
                
                <div class="empty-state" id="emptyState" style="display: none;">
                    <i class="fas fa-box-open"></i>
                    <h3>No products tracked yet</h3>
                    <p>Start tracking products by clicking the "Add Product" button above</p>
                </div>
            </div>
        </div>

        <!-- Check Prices Page -->
        <div class="page" id="checkPricesPage">
            <div class="container">
                <div class="check-prices-content">
                    <i class="fas fa-sync-alt icon-large"></i>
                    <h2>Check All Prices</h2>
                    <p>Manually check the current prices of all tracked products</p>
                    <button class="btn btn-primary btn-large" onclick="checkPrices()" id="checkPricesBtn">
                        <i class="fas fa-search"></i> Check Prices Now
                    </button>
                    <div class="checking-status" id="checkingStatus" style="display: none;">
                        <div class="spinner"></div>
                        <p>Checking prices...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Email Settings Page -->
        <div class="page" id="emailPage">
            <div class="container">
                <h2>Email Notifications</h2>
                <form class="settings-form" id="emailForm">
                    <div class="form-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="emailEnabled">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Enable Email Alerts</span>
                        </label>
                    </div>
                    
                    <div id="emailSettings" style="display: none;">
                        <div class="form-group">
                            <label>SMTP Server</label>
                            <input type="text" id="smtpServer" placeholder="smtp.gmail.com" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label>SMTP Port</label>
                            <input type="number" id="smtpPort" value="587" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label>From Email</label>
                            <input type="email" id="fromEmail" placeholder="your-email@gmail.com" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" id="password" placeholder="App-specific password" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label>To Email</label>
                            <input type="email" id="toEmail" placeholder="recipient@email.com" class="form-control">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Schedule Page -->
        <div class="page" id="schedulePage">
            <div class="container">
                <div class="schedule-content">
                    <i class="fas fa-clock icon-large"></i>
                    <h2>Automatic Price Checking</h2>
                    <p>Schedule automatic price checks every 12 hours</p>
                    
                    <div class="scheduler-status" id="schedulerStatus">
                        <div class="status-indicator" id="statusIndicator">
                            <span class="status-dot"></span>
                            <span class="status-text">Scheduler Inactive</span>
                        </div>
                    </div>
                    
                    <div class="scheduler-controls">
                        <button class="btn btn-success" onclick="startScheduler()" id="startSchedulerBtn">
                            <i class="fas fa-play"></i> Start Scheduler
                        </button>
                        <button class="btn btn-danger" onclick="stopScheduler()" id="stopSchedulerBtn" style="display: none;">
                            <i class="fas fa-stop"></i> Stop Scheduler
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="#" class="nav-item active" onclick="showPage('productsPage', this)">
            <i class="fas fa-list"></i>
            <span>Products</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('checkPricesPage', this)">
            <i class="fas fa-sync-alt"></i>
            <span>Check</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('emailPage', this)">
            <i class="fas fa-envelope"></i>
            <span>Email</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('schedulePage', this)">
            <i class="fas fa-clock"></i>
            <span>Schedule</span>
        </a>
    </nav>

    <!-- Add Product Modal -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Product to Track</h3>
                <button class="modal-close" onclick="closeAddProductModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="addProductForm" onsubmit="addProduct(event)">
                <div class="form-group">
                    <label>Storenvy Product URL</label>
                    <input type="url" id="productUrl" required class="form-control" 
                           placeholder="https://www.storenvy.com/products/...">
                </div>
                <div class="form-group">
                    <label>Target Price ($)</label>
                    <input type="number" id="targetPrice" required step="0.01" min="0" 
                           class="form-control" placeholder="25.00">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeAddProductModal()">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add Product
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script src="js/app.js"></script>
</body>
</html>