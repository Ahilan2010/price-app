\<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TagTracker - Enhanced Multi-Platform Price Monitor</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-shopping-cart"></i>
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <h1>TagTracker</h1>
                    <span class="tagline">Smart Multi-Platform Monitoring</span>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon products">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="totalProducts">0</span>
                            <span class="stat-label">Products</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon roblox">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="totalRobloxItems">0</span>
                            <span class="stat-label">Roblox UGC</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon flights">
                            <i class="fas fa-plane"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="totalFlights">0</span>
                            <span class="stat-label">Flight Deals</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon stocks">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="totalStockAlerts">0</span>
                            <span class="stat-label">Stock Alerts</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Products Page (Amazon, eBay, Etsy, Walmart, Storenvy only) -->
        <div class="page active" id="productsPage">
            <div class="container">
                <div class="page-header">
                    <div class="page-title">
                        <h2><i class="fas fa-shopping-cart"></i> Product Tracking</h2>
                        <p>Monitor prices across Amazon, eBay, Etsy, Walmart, and Storenvy</p>
                    </div>
                    <button class="btn btn-primary" onclick="showAddProductModal()">
                        <i class="fas fa-plus"></i> Add Product
                    </button>
                </div>
                
                <div class="content-grid" id="productsList">
                    <!-- Products will be loaded here -->
                </div>
                
                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-icon">
                        <i class="fas fa-shopping-bag"></i>
                    </div>
                    <h3>No products tracked yet</h3>
                    <p>Start monitoring your favorite products across major e-commerce platforms!</p>
                    <button class="btn btn-primary" onclick="showAddProductModal()">
                        <i class="fas fa-plus"></i> Add Your First Product
                    </button>
                </div>
            </div>
        </div>

        <!-- Roblox UGC Page -->
        <div class="page" id="robloxPage">
            <div class="container">
                <div class="page-header">
                    <div class="page-title">
                        <h2><i class="fas fa-gamepad"></i> Roblox UGC Tracking</h2>
                        <p>Track Roblox User-Generated Content items and their Robux prices</p>
                    </div>
                    <button class="btn btn-primary" onclick="showAddRobloxModal()">
                        <i class="fas fa-plus"></i> Add Roblox Item
                    </button>
                </div>
                
                <div class="content-grid" id="robloxList">
                    <!-- Roblox items will be loaded here -->
                </div>
                
                <div class="empty-state" id="robloxEmptyState" style="display: none;">
                    <div class="empty-icon">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <h3>No Roblox items tracked yet</h3>
                    <p>Start tracking UGC items, accessories, and avatar items on Roblox!</p>
                    <button class="btn btn-primary" onclick="showAddRobloxModal()">
                        <i class="fas fa-plus"></i> Add Your First Item
                    </button>
                </div>
            </div>
        </div>

        <!-- Flights Page -->
        <div class="page" id="flightsPage">
            <div class="container">
                <!-- Supported Sites Info -->
                <div class="supported-sites-info">
                    <h3><i class="fas fa-info-circle"></i> Supported Flight Search Sites</h3>
                    <div class="sites-grid">
                        <div class="site-card">
                            <div class="site-icon">‚úàÔ∏è</div>
                            <div class="site-details">
                                <h4>Kayak</h4>
                                <p>Use search result URLs from kayak.com</p>
                                <small>Example: kayak.com/flights/NYC-LAX/2024-03-15</small>
                            </div>
                        </div>
                        <div class="site-card">
                            <div class="site-icon">üåç</div>
                            <div class="site-details">
                                <h4>Expedia</h4>
                                <p>Use flight search results from expedia.com</p>
                                <small>Example: expedia.com/Flights-Search?...</small>
                            </div>
                        </div>
                        <div class="site-card">
                            <div class="site-icon">üè®</div>
                            <div class="site-details">
                                <h4>Booking.com</h4>
                                <p>Use flight search pages from booking.com</p>
                                <small>Example: booking.com/flights/...</small>
                            </div>
                        </div>
                        <div class="site-card">
                            <div class="site-icon">üí∞</div>
                            <div class="site-details">
                                <h4>Priceline</h4>
                                <p>Use search results from priceline.com</p>
                                <small>Example: priceline.com/m/flights/...</small>
                            </div>
                        </div>
                        <div class="site-card">
                            <div class="site-icon">üîç</div>
                            <div class="site-details">
                                <h4>Momondo</h4>
                                <p>Use flight search results from momondo.com</p>
                                <small>Example: momondo.com/flight-search/...</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="page-header">
                    <div class="page-title">
                        <h2><i class="fas fa-plane"></i> Flight Price Tracking</h2>
                        <p>Monitor flight prices and get notified when they drop</p>
                    </div>
                    <button class="btn btn-primary" onclick="showAddFlightModal()">
                        <i class="fas fa-plus"></i> Add Flight
                    </button>
                </div>
                
                <div class="content-grid" id="flightsList">
                    <!-- Flight items will be loaded here -->
                </div>
                
                <div class="empty-state" id="flightsEmptyState" style="display: none;">
                    <div class="empty-icon">
                        <i class="fas fa-plane"></i>
                    </div>
                    <h3>No flights tracked yet</h3>
                    <p>Start tracking flight prices from supported travel sites!</p>
                    <button class="btn btn-primary" onclick="showAddFlightModal()">
                        <i class="fas fa-plus"></i> Add Your First Flight
                    </button>
                </div>
            </div>
        </div>

        <!-- Stocks Page -->
        <div class="page" id="stocksPage">
            <div class="container">
                <div class="page-header">
                    <div class="page-title">
                        <h2><i class="fas fa-chart-line"></i> Stock Alerts</h2>
                        <p>Set price alerts for your favorite stocks</p>
                    </div>
                    <button class="btn btn-primary" onclick="showAddStockModal()">
                        <i class="fas fa-plus"></i> Add Alert
                    </button>
                </div>
                
                <div class="content-grid" id="stocksList">
                    <!-- Stock alerts will be loaded here -->
                </div>
                
                <div class="empty-state" id="stocksEmptyState" style="display: none;">
                    <div class="empty-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>No stock alerts yet</h3>
                    <p>Create alerts to track stock price movements</p>
                    <button class="btn btn-primary" onclick="showAddStockModal()">
                        <i class="fas fa-plus"></i> Create First Alert
                    </button>
                </div>
            </div>
        </div>

        <!-- Monitor Page -->
        <div class="page" id="monitorPage">
            <div class="container">
                <div class="monitor-content">
                    <div class="monitor-header">
                        <div class="monitor-icon">
                            <i class="fas fa-desktop"></i>
                        </div>
                        <h2>Price Monitor</h2>
                        <p>Real-time price checking and automatic monitoring across all platforms</p>
                    </div>
                    
                    <div class="monitor-actions">
                        <button class="btn btn-primary btn-large" onclick="checkAllPrices()" id="checkPricesBtn">
                            <i class="fas fa-search-dollar"></i> Check All Prices
                        </button>
                        
                        <div class="checking-status" id="checkingStatus" style="display: none;">
                            <div class="spinner"></div>
                            <p>Scanning prices across all platforms...</p>
                        </div>
                    </div>
                    
                    <!-- Scheduler Status -->
                    <div class="scheduler-panel">
                        <h3><i class="fas fa-clock"></i> Automatic Monitoring</h3>
                        <div class="scheduler-info">
                            <div class="schedule-item">
                                <div class="schedule-icon">
                                    <i class="fas fa-shopping-cart"></i>
                                </div>
                                <div class="schedule-details">
                                    <span class="schedule-type">Products & UGC</span>
                                    <span class="schedule-interval">Every 6 hours</span>
                                </div>
                            </div>
                            
                            <div class="schedule-item">
                                <div class="schedule-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="schedule-details">
                                    <span class="schedule-type">Stocks</span>
                                    <span class="schedule-interval">Every 5 minutes</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="scheduler-status" id="schedulerStatus">
                            <div class="status-indicator">
                                <div class="status-dot" id="statusDot"></div>
                                <span id="statusText">Checking status...</span>
                            </div>
                            
                            <div class="scheduler-controls">
                                <button class="btn btn-success" onclick="startScheduler()" id="startBtn">
                                    <i class="fas fa-play"></i> Start Monitoring
                                </button>
                                <button class="btn btn-danger" onclick="stopScheduler()" id="stopBtn" style="display: none;">
                                    <i class="fas fa-stop"></i> Stop Monitoring
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <div class="page" id="settingsPage">
            <div class="container">
                <div class="page-header">
                    <div class="page-title">
                        <h2><i class="fas fa-cog"></i> Settings</h2>
                        <p>Configure email notifications and preferences</p>
                    </div>
                </div>
                
                <div class="settings-container">
                    <div class="settings-card">
                        <div class="settings-header">
                            <h3><i class="fas fa-envelope"></i> Email Notifications</h3>
                            <p>Get notified when prices hit your targets</p>
                        </div>
                        
                        <form class="settings-form" id="emailForm">
                            <div class="form-group">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="emailEnabled">
                                    <span class="toggle-slider"></span>
                                    <span class="toggle-label">Enable Email Alerts</span>
                                </label>
                            </div>
                            
                            <div id="emailSettings" style="display: none;">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>SMTP Server</label>
                                        <input type="text" id="smtpServer" placeholder="smtp.gmail.com" class="form-control">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>Port</label>
                                        <input type="number" id="smtpPort" value="587" class="form-control">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label>From Email</label>
                                    <input type="email" id="fromEmail" placeholder="your-email@gmail.com" class="form-control">
                                </div>
                                
                                <div class="form-group">
                                    <label>App Password</label>
                                    <input type="password" id="password" placeholder="Your app-specific password" class="form-control">
                                </div>
                                
                                <div class="form-group">
                                    <label>Notification Email</label>
                                    <input type="email" id="toEmail" placeholder="notifications@email.com" class="form-control">
                                </div>
                                
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> Save Configuration
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="#" class="nav-item active" onclick="showPage('productsPage', this)">
            <div class="nav-icon">
                <i class="fas fa-shopping-cart"></i>
            </div>
            <span>Products</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('robloxPage', this)">
            <div class="nav-icon">
                <i class="fas fa-gamepad"></i>
            </div>
            <span>Roblox UGC</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('flightsPage', this)">
            <div class="nav-icon">
                <i class="fas fa-plane"></i>
            </div>
            <span>Flights</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('stocksPage', this)">
            <div class="nav-icon">
                <i class="fas fa-chart-line"></i>
            </div>
            <span>Stocks</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('monitorPage', this)">
            <div class="nav-icon">
                <i class="fas fa-desktop"></i>
            </div>
            <span>Monitor</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('settingsPage', this)">
            <div class="nav-icon">
                <i class="fas fa-cog"></i>
            </div>
            <span>Settings</span>
        </a>
    </nav>

    <!-- Add Product Modal (Amazon, eBay, Etsy, Walmart, Storenvy only) -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-plus"></i> Track New Product</h3>
                <button class="modal-close" onclick="closeAddProductModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="addProductForm" onsubmit="addProduct(event)">
                <div class="form-group">
                    <label><i class="fas fa-store"></i> Platform</label>
                    <select id="platformSelect" required class="form-control" onchange="updateUrlPlaceholder()">
                        <option value="">Select a platform...</option>
                        <option value="amazon">üõí Amazon</option>
                        <option value="ebay">üè∑Ô∏è eBay</option>
                        <option value="etsy">üé® Etsy</option>
                        <option value="walmart">üè™ Walmart</option>
                        <option value="storenvy">üè¨ Storenvy</option>
                    </select>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-link"></i> Product URL</label>
                    <input type="url" id="productUrl" required class="form-control" 
                           placeholder="Select a platform first...">
                    <small class="form-hint" id="urlHint" style="color: var(--text-secondary); margin-top: 4px; display: block;"></small>
                </div>
                <div class="form-group">
                    <label for="targetPrice"><i class="fas fa-dollar-sign"></i> Target Price ($)</label>
                    <input type="number" id="targetPrice" required step="0.01" min="0" 
                           class="form-control" placeholder="25.00">
                </div>
                <div class="platform-info" id="platformInfo" style="display: none;">
                    <div class="info-card">
                        <h4><i class="fas fa-info-circle"></i> Platform Tips</h4>
                        <p id="platformTips"></p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeAddProductModal()">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Start Tracking
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Roblox Item Modal -->
    <div class="modal" id="addRobloxModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-gamepad"></i> Track Roblox UGC Item</h3>
                <button class="modal-close" onclick="closeAddRobloxModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="addRobloxForm" onsubmit="addRobloxItem(event)">
                <div class="form-group">
                    <label><i class="fas fa-link"></i> Roblox Catalog URL</label>
                    <input type="url" id="robloxUrl" required class="form-control" 
                           placeholder="https://www.roblox.com/catalog/123456789/Item-Name">
                    <small class="form-hint">Example: https://www.roblox.com/catalog/123456789/Item-Name</small>
                </div>
                <div class="form-group">
                    <label for="robloxTargetPrice"><i class="fas fa-coins"></i> Target Price (Robux)</label>
                    <input type="number" id="robloxTargetPrice" required step="1" min="1" 
                           class="form-control" placeholder="100">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeAddRobloxModal()">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Start Tracking
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Flight Modal -->
    <div class="modal" id="addFlightModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-plane"></i> Track Flight Price</h3>
                <button class="modal-close" onclick="closeAddFlightModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="addFlightForm" onsubmit="addFlight(event)">
                <div class="form-group">
                    <label><i class="fas fa-link"></i> Flight Search URL</label>
                    <input type="url" id="flightUrl" required class="form-control" 
                           placeholder="https://www.kayak.com/flights/NYC-LAX/2024-03-15">
                    <small class="form-hint">Use search result URLs from Kayak, Expedia, Booking.com, Priceline, or Momondo</small>
                </div>
                <div class="form-group">
                    <label for="flightTargetPrice"><i class="fas fa-dollar-sign"></i> Target Price ($)</label>
                    <input type="number" id="flightTargetPrice" required step="0.01" min="0" 
                           class="form-control" placeholder="350.00">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeAddFlightModal()">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Start Tracking
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Stock Alert Modal -->
    <div class="modal" id="addStockModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-chart-line"></i> Create Stock Alert</h3>
                <button class="modal-close" onclick="closeAddStockModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="addStockForm" onsubmit="addStockAlert(event)">
                <div class="form-group">
                    <label><i class="fas fa-tag"></i> Stock Symbol</label>
                    <input type="text" id="stockSymbol" required class="form-control" 
                           placeholder="AAPL, MSFT, GOOGL, etc." style="text-transform: uppercase;">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-bell"></i> Alert Type</label>
                    <select id="alertType" required class="form-control">
                        <option value="">Select alert type...</option>
                        <option value="price_above">Price rises above</option>
                        <option value="price_below">Price drops below</option>
                        <option value="percent_up">Price increases by %</option>
                        <option value="percent_down">Price decreases by %</option>
                    </select>
                </div>
                <div class="form-group">
                    <label id="thresholdLabel"><i class="fas fa-target"></i> Threshold</label>
                    <input type="number" id="alertThreshold" required step="0.01" min="0" 
                           class="form-control" placeholder="210.00">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeAddStockModal()">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-bell"></i> Create Alert
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script src="js/app.js"></script>
</body>
</html>