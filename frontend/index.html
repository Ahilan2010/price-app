<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TagTracker - Smart Price Monitoring</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Authentication Container -->
    <div id="authContainer" class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <div class="logo">
                    <div class="logo-icon">
                        <img src="logo-base64 auth-logo" alt="TagTracker Logo" width="40" height="40">
                    </div>
                    <h1>TagTracker</h1>
                </div>
                <p class="auth-subtitle">Smart price monitoring for e-commerce, Roblox, and stocks</p>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="auth-form">
                <h2>Sign In</h2>
                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label for="loginEmail">
                            <i class="fas fa-envelope"></i>
                            Email Address
                        </label>
                        <input type="email" id="loginEmail" required placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">
                            <i class="fas fa-lock"></i>
                            Password
                        </label>
                        <input type="password" id="loginPassword" required placeholder="Enter your password">
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">
                        <i class="fas fa-sign-in-alt"></i>
                        Sign In
                    </button>
                </form>
                <div class="auth-switch">
                    <p>Don't have an account? <a href="#" onclick="showSignupForm()">Create one</a></p>
                </div>
            </div>

            <!-- Signup Form -->
            <div id="signupForm" class="auth-form" style="display: none;">
                <h2>Create Account</h2>
                <form onsubmit="handleSignup(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="signupFirstName">
                                <i class="fas fa-user"></i>
                                First Name *
                            </label>
                            <input type="text" id="signupFirstName" required placeholder="John">
                        </div>
                        <div class="form-group">
                            <label for="signupLastName">
                                <i class="fas fa-user"></i>
                                Last Name
                            </label>
                            <input type="text" id="signupLastName" placeholder="Doe">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="signupEmail">
                            <i class="fas fa-envelope"></i>
                            Email Address *
                        </label>
                        <input type="email" id="signupEmail" required placeholder="john@example.com">
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">
                            <i class="fas fa-lock"></i>
                            Password * (min 6 characters)
                        </label>
                        <input type="password" id="signupPassword" required minlength="6" placeholder="Create a secure password">
                    </div>
                    <div class="form-group">
                        <label for="signupSmtpPassword">
                            <i class="fas fa-mail-bulk"></i>
                            Gmail App Password (Optional)
                        </label>
                        <input type="password" id="signupSmtpPassword" placeholder="For email alerts (can be added later)">
                        <small class="form-hint">
                            <i class="fas fa-info-circle"></i>
                            Optional: Add your Gmail app password to receive email alerts when deals are found
                        </small>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">
                        <i class="fas fa-user-plus"></i>
                        Create Account
                    </button>
                </form>
                <div class="auth-switch">
                    <p>Already have an account? <a href="#" onclick="showLoginForm()">Sign in</a></p>
                </div>
            </div>

            <!-- Features Preview -->
            <div class="auth-features">
                <h3>What you can track:</h3>
                <div class="feature-grid">
                    <div class="feature-item">
                        <i class="fas fa-shopping-cart"></i>
                        <span>Amazon, eBay, Etsy</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-gamepad"></i>
                        <span>Roblox UGC Items</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-chart-line"></i>
                        <span>Stock Prices</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-bell"></i>
                        <span>Email Alerts</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="appContainer" class="app-container" style="display: none;">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-brand">
                <div class="logo-icon navbar-logo">
                    <img src="logo-base64 navbar-logo" alt="TagTracker Logo" width="32" height="32"> 
                </div>
                <span>TagTracker</span>
            </div>
            
            <div class="nav-menu">
                <div class="nav-item active" onclick="showPage('productsPage', this)">
                    <i class="fas fa-shopping-cart"></i>
                    <span>E-commerce</span>
                </div>
                <div class="nav-item" onclick="showPage('robloxPage', this)">
                    <i class="fas fa-gamepad"></i>
                    <span>Roblox</span>
                </div>
                <div class="nav-item" onclick="showPage('stocksPage', this)">
                    <i class="fas fa-chart-line"></i>
                    <span>Stocks</span>
                </div>
                <div class="nav-item" onclick="showPage('settingsPage', this)">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </div>
            </div>
            
            <div class="nav-user">
                <div class="user-dropdown">
                    <button class="user-button">
                        <i class="fas fa-user-circle"></i>
                        <span id="userName">User</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="dropdown-menu">
                        <div class="dropdown-header">
                            <div class="user-info">
                                <div class="user-name" id="accountName">John Doe</div>
                                <div class="user-email" id="accountEmail">john@example.com</div>
                            </div>
                        </div>
                        <button class="dropdown-item" onclick="handleLogout()">
                            <i class="fas fa-sign-out-alt"></i>
                            Sign Out
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Stats Dashboard -->
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-shopping-bag"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-number" id="totalProducts">0</div>
                    <div class="stat-label">E-commerce Products</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-gamepad"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-number" id="totalRobloxItems">0</div>
                    <div class="stat-label">Roblox Items</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-number" id="totalStockAlerts">0</div>
                    <div class="stat-label">Stock Alerts</div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-number">$<span id="totalSavings">0.00</span></div>
                    <div class="stat-label">Potential Savings</div>
                </div>
            </div>
        </div>

        <!-- E-commerce Products Page -->
        <div id="productsPage" class="page active">
            <div class="page-header">
                <h2>
                    <i class="fas fa-shopping-cart"></i>
                    E-commerce Products
                </h2>
                <button class="btn btn-primary" onclick="showAddProductModal()">
                    <i class="fas fa-plus"></i>
                    Add Product
                </button>
            </div>

            <div id="productsList" class="products-grid">
                <!-- Products will be loaded here -->
            </div>

            <div id="emptyState" class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <h3>No products being tracked</h3>
                <p>Add your first product to start monitoring prices from Amazon, eBay, Etsy, Walmart, and more!</p>
                <button class="btn btn-primary" onclick="showAddProductModal()">
                    <i class="fas fa-plus"></i>
                    Add Your First Product
                </button>
            </div>
        </div>

        <!-- Roblox Page -->
        <div id="robloxPage" class="page">
            <div class="page-header">
                <h2>
                    <i class="fas fa-gamepad"></i>
                    Roblox UGC Items
                </h2>
                <button class="btn btn-primary" onclick="showAddRobloxModal()">
                    <i class="fas fa-plus"></i>
                    Add Roblox Item
                </button>
            </div>

            <div id="robloxList" class="products-grid">
                <!-- Roblox items will be loaded here -->
            </div>

            <div id="robloxEmptyState" class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-gamepad"></i>
                </div>
                <h3>No Roblox items being tracked</h3>
                <p>Add Roblox UGC items to monitor their Robux prices and get alerts when they go on sale!</p>
                <button class="btn btn-primary" onclick="showAddRobloxModal()">
                    <i class="fas fa-plus"></i>
                    Add Your First Roblox Item
                </button>
            </div>
        </div>

        <!-- Stocks Page -->
        <div id="stocksPage" class="page">
            <div class="page-header">
                <h2>
                    <i class="fas fa-chart-line"></i>
                    Stock Alerts
                </h2>
                <button class="btn btn-primary" onclick="showAddStockModal()">
                    <i class="fas fa-plus"></i>
                    Add Stock Alert
                </button>
            </div>

            <div id="stocksList" class="products-grid">
                <!-- Stock alerts will be loaded here -->
            </div>

            <div id="stocksEmptyState" class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h3>No stock alerts configured</h3>
                <p>Create alerts for stock price movements and percentage changes to stay informed about your investments!</p>
                <button class="btn btn-primary" onclick="showAddStockModal()">
                    <i class="fas fa-plus"></i>
                    Add Your First Stock Alert
                </button>
            </div>
        </div>

        <!-- Settings Page -->
        <div id="settingsPage" class="page">
            <div class="page-header">
                <h2>
                    <i class="fas fa-cog"></i>
                    Settings
                </h2>
            </div>

            <div class="settings-content">
                <div class="settings-section">
                    <h3>
                        <i class="fas fa-palette"></i>
                        Appearance
                    </h3>
                    <p>Customize how TagTracker looks and feels.</p>
                    
                    <div class="setting-item">
                        <label class="setting-label">
                            <i class="fas fa-moon"></i>
                            Dark Mode
                        </label>
                        <div class="theme-toggle">
                            <button class="theme-btn" data-theme="light" onclick="setTheme('light')">
                                <i class="fas fa-sun"></i>
                                Light
                            </button>
                            <button class="theme-btn active" data-theme="dark" onclick="setTheme('dark')">
                                <i class="fas fa-moon"></i>
                                Dark
                            </button>
                            <button class="theme-btn" data-theme="auto" onclick="setTheme('auto')">
                                <i class="fas fa-desktop"></i>
                                Auto
                            </button>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>
                        <i class="fas fa-envelope"></i>
                        Email Notifications
                    </h3>
                    <p>Configure email alerts to get notified when deals are found or stock alerts trigger.</p>
                    
                    <form id="emailForm" class="settings-form">
                        <div class="form-group">
                            <label for="smtpPassword">
                                <i class="fas fa-key"></i>
                                Gmail App Password
                            </label>
                            <input type="password" id="smtpPassword" placeholder="Enter your Gmail app password">
                            <small class="form-hint">
                                <i class="fas fa-info-circle"></i>
                                <a href="https://support.google.com/accounts/answer/185833" target="_blank">Learn how to create a Gmail app password</a>
                            </small>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Save Email Settings
                        </button>
                    </form>
                </div>

                <div class="settings-section">
                    <h3>
                        <i class="fas fa-info-circle"></i>
                        About TagTracker
                    </h3>
                    <div class="about-content">
                        <p><strong>Version:</strong> 2.0.0</p>
                        <p><strong>Features:</strong></p>
                        <ul>
                            <li>✅ Multi-platform e-commerce price tracking</li>
                            <li>✅ Roblox UGC item monitoring</li>
                            <li>✅ Stock price alerts</li>
                            <li>✅ Automatic background monitoring</li>
                            <li>✅ Email notifications</li>
                            <li>✅ User authentication</li>
                            <li>✅ Dark mode support</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Product Modal -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>
                    <i class="fas fa-plus"></i>
                    Add E-commerce Product
                </h3>
                <button class="close-btn" onclick="closeAddProductModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="addProductForm" onsubmit="addProduct(event)">
                <div class="form-group">
                    <label for="platformSelect">
                        <i class="fas fa-store"></i>
                        E-commerce Platform
                    </label>
                    <select id="platformSelect" required onchange="updateUrlPlaceholder()">
                        <option value="">Choose a platform...</option>
                        <option value="amazon">🛒 Amazon</option>
                        <option value="ebay">🏷️ eBay</option>
                        <option value="etsy">🎨 Etsy</option>
                        <option value="walmart">🏪 Walmart</option>
                        <option value="storenvy">🏬 Storenvy</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="productUrl">
                        <i class="fas fa-link"></i>
                        Product URL
                    </label>
                    <input type="url" id="productUrl" required placeholder="Select a platform first...">
                    <small id="urlHint" class="form-hint"></small>
                </div>
                
                <div id="platformInfo" style="display: none;" class="platform-info">
                    <i class="fas fa-lightbulb"></i>
                    <span id="platformTips"></span>
                </div>
                
                <div class="form-group">
                    <label for="targetPrice">
                        <i class="fas fa-dollar-sign"></i>
                        Target Price ($)
                    </label>
                    <input type="number" id="targetPrice" step="0.01" min="0.01" required placeholder="150.00">
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeAddProductModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        Add Product
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Roblox Modal -->
    <div id="addRobloxModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>
                    <i class="fas fa-gamepad"></i>
                    Add Roblox UGC Item
                </h3>
                <button class="close-btn" onclick="closeAddRobloxModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="addRobloxForm" onsubmit="addRobloxItem(event)">
                <div class="form-group">
                    <label for="robloxUrl">
                        <i class="fas fa-link"></i>
                        Roblox Item URL
                    </label>
                    <input type="url" id="robloxUrl" required placeholder="https://www.roblox.com/catalog/123456789/item-name">
                    <small class="form-hint">
                        <i class="fas fa-info-circle"></i>
                        Copy the URL from the Roblox catalog item page
                    </small>
                </div>
                
                <div class="form-group">
                    <label for="robloxTargetPrice">
                        <i class="fas fa-coins"></i>
                        Target Price (Robux)
                    </label>
                    <input type="number" id="robloxTargetPrice" min="1" required placeholder="500">
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeAddRobloxModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        Add Roblox Item
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Stock Alert Modal -->
    <div id="addStockModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>
                    <i class="fas fa-chart-line"></i>
                    Add Stock Alert
                </h3>
                <button class="close-btn" onclick="closeAddStockModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="addStockForm" onsubmit="addStockAlert(event)">
                <div class="form-group">
                    <label for="stockSymbol">
                        <i class="fas fa-building"></i>
                        Stock Symbol
                    </label>
                    <input type="text" id="stockSymbol" required placeholder="AAPL" style="text-transform: uppercase;">
                </div>
                
                <div class="form-group">
                    <label for="alertType">
                        <i class="fas fa-bell"></i>
                        Alert Type
                    </label>
                    <select id="alertType" required onchange="updateThresholdLabel()">
                        <option value="price_above">💰 Price Goes Above</option>
                        <option value="price_below">💰 Price Goes Below</option>
                        <option value="percent_up">📈 Price Increases By</option>
                        <option value="percent_down">📉 Price Decreases By</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label id="thresholdLabel" for="alertThreshold">
                        💰 Price Threshold ($)
                    </label>
                    <input type="number" id="alertThreshold" step="0.01" min="0.01" required placeholder="210.00">
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeAddStockModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        Create Alert
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- JavaScript -->
    <script src="js/app.js"></script>
</body>
</html>