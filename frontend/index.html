<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storenvy Price Tracker</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1><i class="fas fa-shopping-bag"></i> Storenvy Price Tracker</h1>
<div class="stats" id="stats">
    <div class="stat-item">
        <span class="stat-value" id="totalProducts">0</span>
        <span class="stat-label">Products</span>
    </div>
    <div class="stat-item">
        <span class="stat-value" id="totalStockAlerts">0</span>
        <span class="stat-label">Stock Alerts</span>
    </div>
    <div class="stat-item">
        <span class="stat-value" id="triggeredAlerts">0</span>
        <span class="stat-label">Triggered</span>
    </div>
    <div class="stat-item">
        <span class="stat-value" id="totalSavings">$0</span>
        <span class="stat-label">Savings</span>
    </div>
</div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Products Page -->
        <div class="page active" id="productsPage">
            <div class="container">
                <div class="page-header">
                    <h2>Tracked Products</h2>
                    <button class="btn btn-primary" onclick="showAddProductModal()">
                        <i class="fas fa-plus"></i> Add Product
                    </button>
                </div>
                
                <div class="products-grid" id="productsList">
                    <!-- Products will be loaded here -->
                </div>
                
                <div class="empty-state" id="emptyState" style="display: none;">
                    <i class="fas fa-box-open"></i>
                    <h3>No products tracked yet</h3>
                    <p>Start tracking products by clicking the "Add Product" button above</p>
                </div>
            </div>
        </div>

        <!-- Stocks Page -->
        <div class="page" id="stocksPage">
            <div class="container">
                <div class="page-header">
                    <h2>Stock Alerts</h2>
                    <button class="btn btn-primary" onclick="showAddStockModal()">
                        <i class="fas fa-plus"></i> Add Stock Alert
                    </button>
                </div>
                
                <div class="products-grid" id="stocksList">
                    <!-- Stock alerts will be loaded here -->
                </div>
                
                <div class="empty-state" id="stocksEmptyState" style="display: none;">
                    <i class="fas fa-chart-line"></i>
                    <h3>No stock alerts yet</h3>
                    <p>Start tracking stocks by clicking the "Add Stock Alert" button above</p>
                </div>
            </div>
        </div>

        <!-- Check Prices Page -->
        <div class="page" id="checkPricesPage">
            <div class="container">
                <div class="check-prices-content">
                    <i class="fas fa-sync-alt icon-large"></i>
                    <h2>Check All Prices</h2>
                    <p>Manually check the current prices of all tracked products and stocks</p>
                    <button class="btn btn-primary btn-large" onclick="checkPrices()" id="checkPricesBtn">
                        <i class="fas fa-search"></i> Check Prices Now
                    </button>
                    <div class="checking-status" id="checkingStatus" style="display: none;">
                        <div class="spinner"></div>
                        <p>Checking prices...</p>
                    </div>
                    
                    <!-- Auto-check Status -->
                    <div style="margin-top: 40px; text-align: center;">
                        <h3>Automatic Checking</h3>
                        <p><i class="fas fa-clock"></i> Products: Every 6 hours</p>
                        <p><i class="fas fa-chart-line"></i> Stocks: Every 5 minutes</p>
                        <p><small>Background checking runs automatically when the app is running</small></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Email Settings Page -->
        <div class="page" id="emailPage">
            <div class="container">
                <h2>Email Notifications</h2>
                <form class="settings-form" id="emailForm">
                    <div class="form-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="emailEnabled">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Enable Email Alerts</span>
                        </label>
                    </div>
                    
                    <div id="emailSettings" style="display: none;">
                        <div class="form-group">
                            <label>SMTP Server</label>
                            <input type="text" id="smtpServer" placeholder="smtp.gmail.com" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label>SMTP Port</label>
                            <input type="number" id="smtpPort" value="587" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label>From Email</label>
                            <input type="email" id="fromEmail" placeholder="your-email@gmail.com" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" id="password" placeholder="App-specific password" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label>To Email</label>
                            <input type="email" id="toEmail" placeholder="recipient@email.com" class="form-control">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="#" class="nav-item active" onclick="showPage('productsPage', this)">
            <i class="fas fa-list"></i>
            <span>Products</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('stocksPage', this)">
            <i class="fas fa-chart-line"></i>
            <span>Stocks</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('checkPricesPage', this)">
            <i class="fas fa-sync-alt"></i>
            <span>Check</span>
        </a>
        <a href="#" class="nav-item" onclick="showPage('emailPage', this)">
            <i class="fas fa-envelope"></i>
            <span>Email</span>
        </a>
    </nav>

    <!-- Add Product Modal -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Product to Track</h3>
                <button class="modal-close" onclick="closeAddProductModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="addProductForm" onsubmit="addProduct(event)">
                <div class="form-group">
                    <label>Storenvy Product URL</label>
                    <input type="url" id="productUrl" required class="form-control" 
                           placeholder="https://www.storenvy.com/products/...">
                </div>
                <div class="form-group">
                    <label>Target Price ($)</label>
                    <input type="number" id="targetPrice" required step="0.01" min="0" 
                           class="form-control" placeholder="25.00">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeAddProductModal()">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add Product
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Stock Alert Modal -->
    <div class="modal" id="addStockModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Stock Alert</h3>
                <button class="modal-close" onclick="closeAddStockModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="addStockForm" onsubmit="addStockAlert(event)">
                <div class="form-group">
                    <label>Stock Symbol</label>
                    <input type="text" id="stockSymbol" required class="form-control" 
                           placeholder="AAPL, MSFT, GOOGL, etc." style="text-transform: uppercase;">
                </div>
                <div class="form-group">
                    <label>Alert Type</label>
                    <select id="alertType" required class="form-control">
                        <option value="">Select alert type...</option>
                        <option value="price_above">Price goes above</option>
                        <option value="price_below">Price goes below</option>
                        <option value="percent_up">Price increases by %</option>
                        <option value="percent_down">Price decreases by %</option>
                    </select>
                </div>
                <div class="form-group">
                    <label id="thresholdLabel">Threshold</label>
                    <input type="number" id="alertThreshold" required step="0.01" min="0" 
                           class="form-control" placeholder="210.00">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeAddStockModal()">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add Alert
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script src="js/app.js"></script>
</body>
</html>